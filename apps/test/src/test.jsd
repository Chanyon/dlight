import {View, required} from "@dlightjs/dlight"
import {VStack} from "@dlightjs/components";

class MyNestComp extends View {
    @Env theme = {}
    Body() {
        div(this.theme.bg)  // will show "use me anywhere inside this environment"
    }
}

class MySubComp2 extends View {
    @Env theme = {}
    Body() {
        div(this.theme.bg)  // will show "use me anywhere inside this environment"
    }
}

class MySubComp1 extends View {
    @Env theme = {}
    didMount(_node) {
        console.log(this.theme)
    }

    Body() {
        MyNestComp()  // call MySubComp2
        div(this.theme.bg)  // will show "use me anywhere inside this environment"
    }
}
const themeColor = {
    apple:{
        bg: "haha1"
    },
    pear: {
        bg: "hh2"
    },
}

export class MyComp extends View {
    @State themeName = "apple"
    theme = themeColor[this.themeName]

    Body() {
        button("+")
            .onclick(() => {
                this.themeName = "pear"
            })
        Environment({theme: this.theme}) {
            div{
                VStack{
                    MySubComp1()
                    MySubComp2()


                }

            }
        }
    }
}
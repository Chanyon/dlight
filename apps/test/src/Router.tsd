import {View} from "@dlightjs/dlight";
import {Route, RouterSpace} from "../../../packages/@dlightjs/components/src/Router";
import {button, div, Env, State} from "@dlightjs/useless";

class SubComp2 extends View {
    @State toggle = true
    @Env RouteParam

    Body() {
        button("hhh2h")
            .onclick(() => {
                this.RouteParam.navigator.to("not")
            })
        if (this.toggle)
        {
            RouterSpace()
                .navigator(this.RouteParam.navigator)
            {
                Route("hi")
                {
                    div("hi niubi")
                }
                Route("not")
                {
                    div("not hihi")
                }
            }
        }
    }
}

class SubComp extends View {
    @Env RouteParam
    didMount(_els: HTMLElement[], _node: CustomNode) {
        console.log("hello")
    }

    Body() {
        div(this.RouteParam.path)
        div("hhhh")
    }
}


export class RouteTest extends View {
    @State navigator
    Body() {
        div("hh")
        button("push to /OKK")
            .onclick(() => {
                this.navigator.to("./OKK")
            })
        button("push to /fuck")
            .onclick(() => {
                this.navigator.to("./fuck")
            })
        button("push to /")
            .onclick(() => {
                this.navigator.to(".")
            })
        button("push to afafa")
            .onclick(() => {
                this.navigator.to("dfafa")
            })
        button("push to /OKK/hi")
            .onclick(() => {
                this.navigator.to("./OKK/hi")
            })
        button("push to /OKK/not")
            .onclick(() => {
                this.navigator.to("/OKK/not")
            })
        button("push to /abccccca")
            .onclick(() => {
                this.navigator.to("/abccccca")
            })
        RouterSpace()
            .navigator(this.navigator)
        {
            Route("OKK")
            {
                for (let i of [...Array(10000).keys()]) {
                    div("我是okk")
                }
            }
            Route("fuck")
            {
                SubComp()
                    .didMount(() => {
                        console.log("jj")
                    })
            }
        }

    }
}

function s(e){return typeof e!="object"?e:Array.isArray(e)?e.filter(r=>r!=null).map(r=>s(r)):Object.fromEntries(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,s(a)]))}function c(e,r){if(typeof e!="object")return e;if(Array.isArray(e))for(let[a,n]of e.entries())e[a]=c(n,r);else for(let[a,n]of Object.entries(e))e[a]=c(n,r);return new Proxy(e,r)}var f={preset:(e,r)=>f.func(e,r),func:(e,r)=>{if(!e||typeof e!="object")return;let n=c(e,{get:function(y,t){switch(t){case"push":case"pop":case"slice":case"splice":return(...i)=>{y[t](...i),n=s(JSON.parse(JSON.stringify(n))),r(n)}}return y[t]},set(y,t,i){return Array.isArray(y)&&t==="length"?(y[t]=i,!0):(y[t]=i,n=JSON.parse(JSON.stringify(n)),r(n),!0)},deleteProperty(y,t){return t in y&&(delete y[t],n=s(JSON.parse(JSON.stringify(n))),r(n)),!0}});return n}};var u=(e,r)=>{let a=r?void 0:e,n=(y,t)=>(y.then(i=>t(i)),t(a),a);return a?n:n(e,r)};var o=e=>({preset:r=>(e(r),r)});export{u as Await,f as StateObject,o as Watch};

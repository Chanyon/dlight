function s(e){return typeof e!="object"?e:Array.isArray(e)?e.filter(n=>n!=null).map(n=>s(n)):Object.fromEntries(Object.entries(e).filter(([n,y])=>y!=null).map(([n,y])=>[n,s(y)]))}function c(e,n){if(typeof e!="object")return e;if(Array.isArray(e))for(let[y,r]of e.entries())e[y]=c(r,n);else for(let[y,r]of Object.entries(e))e[y]=c(r,n);return new Proxy(e,n)}var f={preset:(e,n)=>f.func(e,n),func:(e,n)=>{if(!e||typeof e!="object")return;let r=c(e,{get:function(t,a){switch(a){case"push":case"pop":case"slice":case"splice":return(...i)=>{t[a](...i),r=s(JSON.parse(JSON.stringify(r))),n(r)}}return t[a]},set(t,a,i){return Array.isArray(t)&&a==="length"?(t[a]=i,!0):(t[a]=i,r=JSON.parse(JSON.stringify(r)),n(r),!0)},deleteProperty(t,a){return a in t&&(delete t[a],r=s(JSON.parse(JSON.stringify(r))),n(r)),!0}});return r}};var l=(e,n,y)=>{let r=n?void 0:e,t=(a,i,u)=>{a.then(o=>{i(o)}),i(r??u)};return r?t:t(e,n,y)};var p=e=>({preset:n=>(e(n),n)});export{l as Await,f as StateObject,p as Watch};
